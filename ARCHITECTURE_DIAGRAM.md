# The Desktop Terrarium - Architecture Diagram

## ğŸ“ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER DESKTOP SCREEN                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Other Applications                     â”‚  â”‚
â”‚  â”‚                  (Browser, IDE, etc.)                     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸŒ¿ The Desktop Terrarium (Transparent Overlay) ğŸ›        â”‚  â”‚
â”‚  â”‚  [Plants] [Herbivores] [Carnivores] [Weather Effects]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         Windows Taskbar                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ Layered Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRESENTATION LAYER                          â”‚
â”‚                   (Terrarium.Desktop - WPF)                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ MainWindow  â”‚  â”‚  Renderer   â”‚  â”‚SystemMonitor â”‚           â”‚
â”‚  â”‚  (XAML)     â”‚  â”‚             â”‚  â”‚              â”‚           â”‚
â”‚  â”‚             â”‚  â”‚ â€¢ Draws     â”‚  â”‚ â€¢ CPU Usage  â”‚           â”‚
â”‚  â”‚ â€¢ Mouse     â”‚  â”‚   Entities  â”‚  â”‚ â€¢ Weather    â”‚           â”‚
â”‚  â”‚   Events    â”‚  â”‚ â€¢ Sprites   â”‚  â”‚   Effects    â”‚           â”‚
â”‚  â”‚ â€¢ Keyboard  â”‚â”€â”€â–¶â”‚   or Shapes â”‚â—€â”€â”‚              â”‚           â”‚
â”‚  â”‚   Input     â”‚  â”‚ â€¢ Weather   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”‚ â€¢ Timers    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚         â”‚                                                        â”‚
â”‚         â”‚ Calls methods (no direct data access)                â”‚
â”‚         â–¼                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ONE-WAY DEPENDENCY (UI depends on Logic, not vice versa)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LOGIC LAYER                                 â”‚
â”‚                 (Terrarium.Logic - Pure C#)                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              SimulationEngine                             â”‚  â”‚
â”‚  â”‚  â€¢ Orchestrates all game logic                           â”‚  â”‚
â”‚  â”‚  â€¢ Updates entities                                       â”‚  â”‚
â”‚  â”‚  â€¢ Manages weather                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â–¼         â–¼           â–¼              â–¼              â–¼       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Foodâ”‚  â”‚Move- â”‚  â”‚Collisionâ”‚  â”‚   World    â”‚  â”‚  Save  â”‚   â”‚
â”‚  â”‚Mgr â”‚  â”‚ment  â”‚  â”‚Detector â”‚  â”‚            â”‚  â”‚Manager â”‚   â”‚
â”‚  â”‚    â”‚  â”‚Calc  â”‚  â”‚         â”‚  â”‚ Entities:  â”‚  â”‚        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚ â€¢ Plants   â”‚                â”‚
â”‚                                  â”‚ â€¢ Creaturesâ”‚                â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ³ Entity Inheritance Tree

```
                    WorldEntity (Abstract Concept)
                    â”œâ”€ X: double
                    â”œâ”€ Y: double
                    â”œâ”€ Id: int
                    â””â”€ Methods: DistanceTo(), ContainsPoint()
                         â”‚
                         â”‚ INHERITS (IS-A Relationship)
                         â–¼
                    LivingEntity
                    â”œâ”€ Health: double
                    â”œâ”€ Age: double
                    â”œâ”€ MaxHealth: double
                    â”œâ”€ IsAlive: bool
                    â””â”€ Methods: TakeDamage(), Heal(), Update()
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    Plant      â”‚  â”‚   Creature    â”‚
         â”‚               â”‚  â”‚               â”‚
         â”‚ â€¢ Size        â”‚  â”‚ â€¢ Speed       â”‚
         â”‚ â€¢ GrowthRate  â”‚  â”‚ â€¢ Hunger      â”‚
         â”‚ â€¢ WaterLevel  â”‚  â”‚ â€¢ Direction   â”‚
         â”‚               â”‚  â”‚               â”‚
         â”‚ Methods:      â”‚  â”‚ Methods:      â”‚
         â”‚ â€¢ Grow()      â”‚  â”‚ â€¢ Move()      â”‚
         â”‚ â€¢ Water()     â”‚  â”‚ â€¢ Eat()       â”‚
         â”‚ â€¢ Shake()     â”‚  â”‚ â€¢ FindFood()  â”‚
         â”‚               â”‚  â”‚               â”‚
         â”‚ Implements:   â”‚  â”‚ Implements:   â”‚
         â”‚ IClickable    â”‚  â”‚ IClickable    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ IMovable      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                      â”‚
                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Herbivore  â”‚      â”‚   Carnivore   â”‚
                   â”‚             â”‚      â”‚               â”‚
                   â”‚ â€¢ Eats      â”‚      â”‚ â€¢ Hunts       â”‚
                   â”‚   Plants    â”‚      â”‚   Herbivores  â”‚
                   â”‚ â€¢ Slower    â”‚      â”‚ â€¢ Faster      â”‚
                   â”‚ â€¢ Timid     â”‚      â”‚ â€¢ Aggressive  â”‚
                   â”‚             â”‚      â”‚               â”‚
                   â”‚ Special:    â”‚      â”‚ Special:      â”‚
                   â”‚ â€¢ FindPlant â”‚      â”‚ â€¢ FindPrey    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Interface Implementation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IClickable Interface                      â”‚
â”‚                    void OnClick()                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Plant â”‚      â”‚  Creature   â”‚
    â”‚       â”‚      â”‚             â”‚
    â”‚ Impl: â”‚      â”‚ Impl:       â”‚
    â”‚ Water â”‚      â”‚ Feed/Reduce â”‚
    â”‚ self  â”‚      â”‚ Hunger      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IMovable Interface                        â”‚
â”‚                    void Move(double deltaTime)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”˜
                                                              â”‚
                                                        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                        â”‚ Creature  â”‚
                                                        â”‚           â”‚
                                                        â”‚ Impl:     â”‚
                                                        â”‚ Update    â”‚
                                                        â”‚ Position  â”‚
                                                        â”‚ based on  â”‚
                                                        â”‚ Speed &   â”‚
                                                        â”‚ Direction â”‚
                                                        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                              â”‚
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚                           â”‚
                                         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  Herbivore   â”‚           â”‚  Carnivore    â”‚
                                         â”‚              â”‚           â”‚               â”‚
                                         â”‚ Inherited    â”‚           â”‚ Inherited     â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Simulation Update Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MAIN GAME LOOP (60 FPS)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Render Loop  â”‚              â”‚   Logic Loop    â”‚
     â”‚   (60 FPS)    â”‚              â”‚  (Variable)     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                               â”‚
             â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Clear Canvas â”‚           â”‚ 1. Update Physics  â”‚
    â”‚                 â”‚           â”‚    â€¢ Movement      â”‚
    â”‚ 2. Draw Plants  â”‚           â”‚    â€¢ Hunger        â”‚
    â”‚                 â”‚           â”‚    â€¢ Aging         â”‚
    â”‚ 3. Draw         â”‚           â”‚                    â”‚
    â”‚    Creatures    â”‚           â”‚ 2. Check           â”‚
    â”‚                 â”‚           â”‚    Collisions      â”‚
    â”‚ 4. Draw Weather â”‚           â”‚    â€¢ Eating        â”‚
    â”‚                 â”‚           â”‚    â€¢ Pushing       â”‚
    â”‚ 5. Draw UI      â”‚           â”‚                    â”‚
    â”‚    â€¢ FPS        â”‚           â”‚ 3. Spawn New       â”‚
    â”‚    â€¢ Entity     â”‚           â”‚    Entities        â”‚
    â”‚      Count      â”‚           â”‚    â€¢ Plants        â”‚
    â”‚    â€¢ Weather    â”‚           â”‚    â€¢ Creatures     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                    â”‚
                                  â”‚ 4. Remove Dead     â”‚
                                  â”‚    Entities        â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ–±ï¸ Mouse Interaction Flow

```
USER HOVERS MOUSE OVER PLANT
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WPF Mouse Event    â”‚
â”‚ Window_MouseMove() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Mouse Position       â”‚
â”‚ position = e.GetPosition â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Loop Through All Plants   â”‚
â”‚ foreach(plant in Plants)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check if Mouse is Over Plant â”‚
â”‚ plant.ContainsPoint(x, y)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    YES? â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Logic Layer:         â”‚      â”‚ Presentation Layer: â”‚
â”‚ plant.Shake()        â”‚â”€â”€â”€â”€â”€â–¶â”‚ Trigger Animation   â”‚
â”‚ (sets internal flag) â”‚      â”‚ Renderer.TriggerPla â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ ntShake(plant)      â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Visual Effect:      â”‚
                              â”‚ Plant wobbles on    â”‚
                              â”‚ screen              â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Save/Load System

```
                    APPLICATION EXIT
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Auto-Save    â”‚
                    â”‚ Triggered    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SaveManager    â”‚         â”‚  Serialize to JSON  â”‚
    â”‚ .SaveWorld()   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  {                  â”‚
                               â”‚    "Width": 1920,   â”‚
                               â”‚    "Height": 200,   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    "Plants": [...], â”‚
    â”‚  terrarium_  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    "Creatures":[...]â”‚
    â”‚  save.json   â”‚           â”‚  }                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ NEXT RUN
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User presses â”‚
    â”‚ F2 to load   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SaveManager        â”‚
    â”‚ .LoadWorld()       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Deserialize JSON         â”‚
    â”‚ Create new entities      â”‚
    â”‚ Restore positions        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SimulationEngine         â”‚
    â”‚ continues with restored  â”‚
    â”‚ world state              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ¦ï¸ CPU-Based Weather System

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  System Monitor     â”‚
    â”‚  (2-second timer)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PerformanceCounter           â”‚
    â”‚ Reads: CPU Usage %           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Convert to Intensity (0.0-1.0)  â”‚
    â”‚ 0% CPU = 0.0                    â”‚
    â”‚ 50% CPU = 0.5                   â”‚
    â”‚ 100% CPU = 1.0                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SimulationEngine.WeatherInt... â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚
    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Renderer    â”‚   â”‚ Creature Logic   â”‚
â”‚             â”‚   â”‚                  â”‚
â”‚ â€¢ Draw      â”‚   â”‚ â€¢ Speed up       â”‚
â”‚   Storm     â”‚   â”‚   movement       â”‚
â”‚   Clouds    â”‚   â”‚ â€¢ Hunt more      â”‚
â”‚ â€¢ Show      â”‚   â”‚   aggressively   â”‚
â”‚   "Stormy"  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Project File Structure

```
The-Desktop-Terrarium/
â”‚
â”œâ”€â”€ ğŸ“ Terrarium.Logic/              (CLASS LIBRARY - No UI)
â”‚   â”œâ”€â”€ ğŸ“ Entities/
â”‚   â”‚   â”œâ”€â”€ WorldEntity.cs          (Base: X, Y, ID)
â”‚   â”‚   â”œâ”€â”€ LivingEntity.cs         (+Health, Age)
â”‚   â”‚   â”œâ”€â”€ Plant.cs                (+Size, Growth)
â”‚   â”‚   â”œâ”€â”€ Creature.cs             (+Speed, Hunger)
â”‚   â”‚   â”œâ”€â”€ Herbivore.cs            (Eats Plants)
â”‚   â”‚   â””â”€â”€ Carnivore.cs            (Hunts Creatures)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Interfaces/
â”‚   â”‚   â”œâ”€â”€ IClickable.cs           (OnClick behavior)
â”‚   â”‚   â””â”€â”€ IMovable.cs             (Movement behavior)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Simulation/
â”‚   â”‚   â”œâ”€â”€ SimulationEngine.cs     (Main orchestrator)
â”‚   â”‚   â”œâ”€â”€ MovementCalculator.cs   (Position updates)
â”‚   â”‚   â”œâ”€â”€ CollisionDetector.cs    (Interaction checks)
â”‚   â”‚   â””â”€â”€ FoodManager.cs          (Spawning logic)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Persistence/
â”‚   â”‚   â””â”€â”€ SaveManager.cs          (JSON save/load)
â”‚   â”‚
â”‚   â””â”€â”€ World.cs                     (Entity collections)
â”‚
â”œâ”€â”€ ğŸ“ Terrarium.Desktop/            (WPF APPLICATION)
â”‚   â”œâ”€â”€ ğŸ“ Rendering/
â”‚   â”‚   â”œâ”€â”€ Renderer.cs             (Draws entities)
â”‚   â”‚   â”œâ”€â”€ SystemMonitor.cs        (CPU tracking)
â”‚   â”‚   â””â”€â”€ AnimationController.cs  (Sprite animations)
â”‚   â”‚
â”‚   â”œâ”€â”€ App.xaml                     (WPF app definition)
â”‚   â”œâ”€â”€ App.xaml.cs
â”‚   â”œâ”€â”€ MainWindow.xaml              (UI layout)
â”‚   â””â”€â”€ MainWindow.xaml.cs           (Event handlers)
â”‚
â”œâ”€â”€ ğŸ“ Terrarium.Tests/              (UNIT TESTS)
â”‚   â”œâ”€â”€ ğŸ“ Entities/
â”‚   â”‚   â”œâ”€â”€ WorldEntityTests.cs
â”‚   â”‚   â”œâ”€â”€ LivingEntityTests.cs
â”‚   â”‚   â”œâ”€â”€ PlantTests.cs
â”‚   â”‚   â”œâ”€â”€ CreatureTests.cs
â”‚   â”‚   â”œâ”€â”€ HerbivoreTests.cs
â”‚   â”‚   â””â”€â”€ CarnivoreTests.cs
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ Simulation/
â”‚       â”œâ”€â”€ SimulationEngineTests.cs
â”‚       â”œâ”€â”€ MovementCalculatorTests.cs
â”‚       â”œâ”€â”€ CollisionDetectorTests.cs
â”‚       â””â”€â”€ FoodManagerTests.cs
â”‚
â”œâ”€â”€ ğŸ“„ README.md                     (User guide)
â”œâ”€â”€ ğŸ“„ PROJECT_SUMMARY.md            (Implementation details)
â”œâ”€â”€ ğŸ“„ VERIFICATION_CHECKLIST.md     (Quality checks)
â”œâ”€â”€ ğŸ“„ ARCHITECTURE_DIAGRAM.md       (This file)
â””â”€â”€ ğŸ“„ Terrarium.sln                 (Solution file)
```

---

## ğŸ¯ Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Terrarium.Testsâ”‚
â”‚   (MSTest)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ References
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       NO DEPENDENCY      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Terrarium.Logicâ”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚Terrarium.Desktop â”‚
â”‚ (Class Library) â”‚      (Logic is isolated) â”‚  (WPF App)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                            â”‚
         â”‚ References                                 â”‚ References
         â–¼                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .NET 8.0         â”‚                         â”‚ WPF Framework    â”‚
â”‚ System libraries â”‚                         â”‚ PresentationCore â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ WindowsBase      â”‚
                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Principle**: Logic layer has ZERO knowledge of WPF or UI.  
This allows:
- âœ… Unit testing without UI
- âœ… Potential port to other platforms (Unity, Console, Web)
- âœ… Clean separation of concerns

---

## ğŸ§© Design Pattern Applications

### 1. Layered Architecture (Fundamental)
```
Presentation (UI) â†’ Logic (Engine) â†’ Data (Entities)
```

### 2. Strategy Pattern (Rendering)
```
Renderer
â”œâ”€ RenderMode.Shapes  â† Default strategy
â””â”€ RenderMode.Sprites â† Alternative strategy
```

### 3. Template Method (Entity Updates)
```
LivingEntity.Update()  â† Abstract template
â”œâ”€ Plant.Update()      â† Specific implementation
â””â”€ Creature.Update()   â† Specific implementation
```

### 4. Observer (Events)
```
SimulationEngine â”€â”€â”
                   â”‚ (could notify)
                   â”œâ”€â†’ Renderer
                   â”œâ”€â†’ SaveManager
                   â””â”€â†’ UI Elements
```

### 5. Single Responsibility (SOLID)
```
Each class does ONE thing:
â”œâ”€ SimulationEngine: Orchestrates
â”œâ”€ MovementCalculator: Calculates positions
â”œâ”€ CollisionDetector: Detects collisions
â”œâ”€ FoodManager: Spawns food
â””â”€ Renderer: Draws to screen
```

---

## ğŸ”¬ Testing Strategy Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TEST PYRAMID                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â•±â•²
                       â•±  â•²        E2E Tests (Manual)
                      â•±    â•²       â€¢ Run app, interact
                     â•±______â•²      â€¢ Visual verification
                    â•±        â•²
                   â•±  100 Unit â•²   Unit Tests (Automated)
                  â•±   Tests     â•²  â€¢ Test logic in isolation
                 â•±              â•² â€¢ Fast, reliable
                â•±________________â•²
            (Tests written here)


Unit Test Coverage:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component      â”‚ Tests   â”‚ Coverage â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Entities       â”‚ 18      â”‚ 100%     â”‚
â”‚ Simulation     â”‚ 17      â”‚ 100%     â”‚
â”‚ UI (manual)    â”‚ N/A     â”‚ Visual   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Diagram Key**:
- `â”Œâ”â””â”˜` - Boxes/containers
- `â”€â”‚` - Connections
- `â–¼â–¶` - Flow direction
- `â”œâ””â”¬` - Tree branches

---

*This diagram illustrates the complete architecture of The Desktop Terrarium.*  
*For code details, see PROJECT_SUMMARY.md*  
*For verification steps, see VERIFICATION_CHECKLIST.md*
