<Window x:Class="Terrarium.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Desktop Terrarium"
        WindowState="Maximized"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ShowActivated="True"
        ResizeMode="NoResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        MouseDown="Window_MouseDown"
        MouseMove="Window_MouseMove"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded">

    <Window.Resources>
        <!-- Modern Color Palette -->
        <Color x:Key="PrimaryGreen">#2ECC71</Color>
        <Color x:Key="DarkGreen">#1A5A3C</Color>
        <Color x:Key="AccentBlue">#3498DB</Color>
        <Color x:Key="AccentOrange">#E67E22</Color>
        <Color x:Key="NightBlue">#1A1A2E</Color>
        <Color x:Key="DawnPink">#FF6B6B</Color>

        <!-- Status/Orb Colors (centralized to avoid code-behind hardcoding) -->
        <Color x:Key="HealthYellow">#F1C40F</Color>
        <Color x:Key="HealthRed">#E74C3C</Color>

        <Color x:Key="OrbDawnCenter">#FFB6C1</Color>
        <Color x:Key="OrbDawnEdge">#FF8C69</Color>
        <Color x:Key="OrbDayCenter">#FFD700</Color>
        <Color x:Key="OrbDayEdge">#FFA500</Color>
        <Color x:Key="OrbDuskCenter">#FF6347</Color>
        <Color x:Key="OrbDuskEdge">#9400D3</Color>
        <Color x:Key="OrbNightCenter">#4682B4</Color>
        <Color x:Key="OrbNightEdge">#191970</Color>
        <Color x:Key="OrbNightGlow">#87CEFA</Color>

        <SolidColorBrush x:Key="HealthGoodBrush" Color="{StaticResource PrimaryGreen}" />
        <SolidColorBrush x:Key="HealthWarnBrush" Color="{StaticResource HealthYellow}" />
        <SolidColorBrush x:Key="HealthBadBrush" Color="{StaticResource HealthRed}" />
        
        <!-- Gradient Brushes -->
        <LinearGradientBrush x:Key="GrassGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#2D5016" Offset="0"/>
            <GradientStop Color="#1A3009" Offset="0.5"/>
            <GradientStop Color="#0D1804" Offset="1"/>
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="StatusPanelGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Color="#DD1E1E2E" Offset="0"/>
            <GradientStop Color="#CC252535" Offset="0.5"/>
            <GradientStop Color="#DD1E1E2E" Offset="1"/>
        </LinearGradientBrush>
        
        <!-- Drop Shadow Effect -->
        <DropShadowEffect x:Key="PanelShadow" Color="Black" Direction="315" ShadowDepth="4" BlurRadius="10" Opacity="0.5"/>
        <DropShadowEffect x:Key="GlowEffect" Color="#2ECC71" Direction="0" ShadowDepth="0" BlurRadius="15" Opacity="0.8"/>
        
        <!-- Text Styles -->
        <Style x:Key="ModernText" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI, Arial"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="Padding" Value="8,4"/>
        </Style>
        
        <Style x:Key="StatLabel" TargetType="TextBlock" BasedOn="{StaticResource ModernText}">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
        
        <Style x:Key="StatValue" TargetType="TextBlock" BasedOn="{StaticResource ModernText}">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
    </Window.Resources>

    <Grid x:Name="MainGrid">
        <!-- Fullscreen Background (for day/night tinting) -->
        <Rectangle x:Name="BackgroundRect" IsHitTestVisible="False" Opacity="0">
            <Rectangle.Fill>
                <SolidColorBrush Color="#1A1A2E"/>
            </Rectangle.Fill>
        </Rectangle>
        
        <!-- Subtle Ground Layer -->
        <Rectangle x:Name="GroundRect" VerticalAlignment="Bottom" Height="80" IsHitTestVisible="False">
            <Rectangle.Fill>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#15228B22" Offset="0"/>
                    <GradientStop Color="#25154015" Offset="0.5"/>
                    <GradientStop Color="#35102010" Offset="1"/>
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>

        <!-- Fullscreen Canvas for entities -->
        <Canvas x:Name="RenderCanvas" ClipToBounds="True" Background="Transparent"/>

        <!-- MINIMALIST TOP BAR (centered) -->
        <Border x:Name="TopBar"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Margin="0,12,0,0"
                CornerRadius="20"
                Background="#CC000000"
                Padding="16,8">
            <StackPanel Orientation="Horizontal">
                <!-- Day/Night Orb (small) -->
                <Border x:Name="DayNightOrb" Width="28" Height="28" CornerRadius="14" Margin="0,0,12,0">
                    <Border.Background>
                        <RadialGradientBrush>
                            <GradientStop x:Name="OrbCenterColor" Color="#FFD700" Offset="0"/>
                            <GradientStop x:Name="OrbEdgeColor" Color="#FFA500" Offset="1"/>
                        </RadialGradientBrush>
                    </Border.Background>
                    <TextBlock x:Name="DayNightIcon" Text="â˜€ï¸" FontSize="14" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>

                <!-- Time -->
                <TextBlock x:Name="TimeOfDayText" Text="Day 1" Foreground="#888" FontSize="11" VerticalAlignment="Center" Margin="0,0,16,0"/>

                <!-- Separator -->
                <Rectangle Width="1" Height="16" Fill="#444" Margin="0,0,16,0"/>

                <!-- Entity Counts (minimal) -->
                <TextBlock Text="ðŸŒ¿" FontSize="12" VerticalAlignment="Center"/>
                <TextBlock x:Name="PlantCountText" Text="0" Foreground="White" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center" Margin="3,0,10,0"/>
                <TextBlock Text="ðŸ°" FontSize="12" VerticalAlignment="Center"/>
                <TextBlock x:Name="HerbivoreCountText" Text="0" Foreground="White" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center" Margin="3,0,10,0"/>
                <TextBlock Text="ðŸº" FontSize="12" VerticalAlignment="Center"/>
                <TextBlock x:Name="CarnivoreCountText" Text="0" Foreground="White" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center" Margin="3,0,16,0"/>

                <!-- Separator -->
                <Rectangle Width="1" Height="16" Fill="#444" Margin="0,0,16,0"/>

                <!-- Health (compact) -->
                <TextBlock Text="â¤ï¸" FontSize="11" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <Grid Width="60" Height="4" VerticalAlignment="Center">
                    <Border Background="#333" CornerRadius="2"/>
                    <Border x:Name="HealthBar" Background="#2ECC71" CornerRadius="2" HorizontalAlignment="Left" Width="60"/>
                </Grid>
                <TextBlock x:Name="EcosystemHealthText" Text="100%" Foreground="#AAA" FontSize="10" VerticalAlignment="Center" Margin="6,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- FPS (top-right, tiny) -->
        <Border x:Name="FpsPanel" Background="#66000000" CornerRadius="4" Padding="6,3" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="12">
            <TextBlock x:Name="FpsText" Text="60" Foreground="#666" FontSize="9"/>
        </Border>

        <!-- Weather (top-right, below FPS) -->
        <Border x:Name="WeatherPanel" Background="#66000000" CornerRadius="4" Padding="6,3" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="12,32,12,0">
            <StackPanel Orientation="Horizontal">
                <TextBlock x:Name="WeatherIcon" Text="â˜€ï¸" FontSize="12" VerticalAlignment="Center"/>
                <TextBlock x:Name="WeatherText" Text="Calm" Foreground="#888" FontSize="9" Margin="4,0,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Stats (bottom-left, minimal) -->
        <Border x:Name="StatsPanel" Background="#88000000" CornerRadius="8" Padding="10,6" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="12,0,0,60">
            <TextBlock x:Name="StatsText" Text="Births: 0 | Deaths: 0 | Peak: 0" Foreground="#777" FontSize="9"/>
        </Border>

        <!-- Speed Indicator (bottom-right) -->
        <Border x:Name="SpeedPanel" Background="#88000000" CornerRadius="8" Padding="10,6" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,12,60">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="âš¡" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                <TextBlock x:Name="SpeedText" Text="1.0x" Foreground="#888" FontSize="9" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Hotkey Hints (hidden by default, press ? to show) -->
        <Border x:Name="HotkeyPanel" Background="#DD000000" CornerRadius="12" Padding="16,12" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,100" Visibility="Collapsed">
            <StackPanel>
                <TextBlock Text="âŒ¨ï¸ Controls" Foreground="White" FontSize="12" FontWeight="SemiBold" Margin="0,0,0,8"/>
                <TextBlock Text="Click - Select/Feed  |  P/H/C - Spawn  |  W - Water" Foreground="#AAA" FontSize="10"/>
                <TextBlock Text="Space - Pause  |  +/- - Speed  |  F - Follow" Foreground="#AAA" FontSize="10"/>
                <TextBlock Text="M - Map  |  G - Graph  |  F1 - Toggle UI  |  Esc - Exit" Foreground="#888" FontSize="10"/>
            </StackPanel>
        </Border>

        <!-- Legacy StatusPanel reference (hidden, for compatibility) -->
        <Border x:Name="StatusPanel" Visibility="Collapsed"/>
    </Grid>
</Window>
